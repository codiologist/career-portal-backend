// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

////////////// 
enum Role {
  HR
  USER
  ADMIN
  MODERATOR
}

model User {
  id                String             @id @default(uuid())
  fullName          String?            @map("full_name")
  email             String             @unique
  phone             String?            @unique
  isActive          Boolean            @default(true) @map("is_active")
  isEmailVerified   Boolean            @default(false) @map("is_email_verified")
  password          String
  role              Role               @default(USER)
  createdAt         DateTime           @default(now()) @map("created_at")
  candidatePersonal CandidatePersonal?

  @@index([id, email])
  @@map("users")
}

///////////////////////////////////  CandidatePersonal ///////////////////////////////////////////

model CandidatePersonal {
  id              String    @id @default(uuid())
  careerTitle     String?   @map("career_title")
  careerObjective String?   @map("career_objective")
  dob             DateTime?
  fullName        String    @map("full_name")
  fatherName      String?   @map("father_name")
  motherName      String?   @map("mother_name")
  spouseName      String?   @map("spouse_name")
  mobileNo        String?   @map("mobile_no")
  alternatePhone  String?   @map("alternate_phone")
  gender          String
  maritalStatus   String    @map("marital_status")
  nationality     String?
  nationalId      String?   @map("national_id")
  portfolioLink   String?   @map("portfolio_link")

  photo     String?
  signature String?
  resume    String?

  religionId String?
  religion   Religion? @relation(fields: [religionId], references: [id])

  bloodGroupId String?
  bloodGroup   BloodGroup? @relation(fields: [bloodGroupId], references: [id])

  interests Interst[] @relation("CandidateInterests") // many-to-many
  skills    Skill[]   @relation("CandidateSkills") // many-to-many

  socialLink SocialLink[]

  userId String @unique @map("user_id")
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([userId])
  @@map("candidate_personals")
}

model Religion {
  id                String              @id @default(uuid())
  name              String
  candidatePersonal CandidatePersonal[]

  @@map("religions")
}

model SocialLink {
  id                  String            @id @default(uuid())
  label               String
  url                 String
  candidatePersonalId String            @map("candidate_personal_id")
  candidatePersonal   CandidatePersonal @relation(fields: [candidatePersonalId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("social_links")
}

model Interst {
  id                 String              @id @default(uuid())
  interstName        String              @map("interst_name")
  candidatesPersonal CandidatePersonal[] @relation("CandidateInterests")

  @@map("intersts")
}

model Skill {
  id                 String              @id @default(uuid())
  skillName          String              @map("skill_name")
  candidatesPersonal CandidatePersonal[] @relation("CandidateSkills")

  @@map("skills")
}

model BloodGroup {
  id                 String              @id @default(uuid())
  name               String
  candidatePersonals CandidatePersonal[]

  @@map("blood_groups")
}

///////////////////////////////////  CandidatePersonal ///////////////////////////////////////////

///////////////////////////////////  CandidateEducation ///////////////////////////////////////////

// model CandidateEducation {
//   id          String  @id @default(uuid())
//   studyYear   String? @map("study_year")
//   passingYear String? @map("passing_year")
//   resultType  String? @map("result_type")
//   result      String?
//   totalCgpa   String? @map("total_cgpa")

//   userId String @map("user_id")
//   user   User   @relation(fields: [userId], references: [id])

//   createdAt DateTime @default(now()) @map("created_at")
//   updatedAt DateTime @updatedAt @map("updated_at")

//   @@map("candidate_education")
// }

// model CandidateExperience {
//   id              String    @id @default(uuid())
//   companyName     String    @map("company_name")
//   companyBusiness String?   @map("company_business")
//   location        String?
//   designation     String
//   department      String?
//   startDate       DateTime  @map("employment_period_start_date")
//   endDate         DateTime? @map("employment_period_end_date")

//   userId String @map("user_id")
//   user   User   @relation(fields: [userId], references: [id])

//   createdAt DateTime @default(now()) @map("created_at")
//   updatedAt DateTime @updatedAt @map("updated_at")

//   @@map("candidate_experience")
// }

// model Skill {
//   id        String @id @default(uuid())
//   skillName String @map("skill_name")

//   personalId String            @map("candidate_personals_id")
//   personal   CandidatePersonal @relation(fields: [personalId], references: [id])

//   @@map("skills")
// }

// model Address {
//   id                String  @id @default(uuid())
//   addressLine       String  @map("address_line")
//   isCityCorporation Boolean @default(false) @map("is_city_corporation")
//   // cityCorporation   CityCorporation? @map("city_corporation_name")
//   division          String
//   district          String
//   thana             String?
//   upazilla          String?
//   union             String?
//   wardNo            String? @map("ward_no")
//   zipCode           String? @map("zip_code")
//   country           String

//   addressTypeId String @map("address_type_id")
//   userId        String @map("user_id")

//   createdAt DateTime @default(now()) @map("created_at")
//   updatedAt DateTime @updatedAt @map("updated_at")

//   @@map("addresses")
// }

/////// Dropdown Option Tabile ///////////////////////////

model baseDivision {
  id        String   @id @default(uuid())
  geoCode   String   @map("geo_code")
  name      String
  bnName    String   @map("bn_name")
  url       String?
  status    Boolean
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("base_divisions") // table name in DB
}
